<html>
  <head>
    <!--Added Bootstrap CSS-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!--Added Bootstrap JS-->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <meta charset="UTF-8">
    <title>Homepage</title>
  </head>

  <body>

  <div class="container-fluid text-center bg-light">
    <h1>{{title}} of {{account.name}}</h1>
    <br>
  </div>

  <div class="container-fluid bg-light">
    <div class="row justify-content-around">
      <form class="form-inline my-2 my-lg-0">
        <input #tagSearch class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-primary my-2 my-sm-0" type="submit" (click)="searchTweetByTag(tagSearch.value)">Search</button>
      </form>

      <div class="container-fluid text-center">
        <table class="table">
          <tbody>
          <tr *ngFor="let searchTweet of searchTweets">
            <td><b>Searched tweets:</b></td>
            <td>{{searchTweet.tag}}</td>
            <td>{{searchTweet.tweetedBy.name}}
            <td>{{searchTweet.message}}</td>
            <td>{{searchTweet.published}}</td>
          </tr>
          </tbody>
        </table>
      </div>

      <button class="btn btn-outline-primary" routerLink="/login" onclick="logout()">Logout</button>
    </div>
    <br>
  </div>

  <div class="container">
    <div class="row">
      <div class="col">
        <form name="form" (ngSubmit)="f.form.valid && addMessage()" #f="ngForm" novalidate>
          <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !message.valid }">
            <label for="message">Message</label>
            <input type="text" class="form-control" name="message" [(ngModel)]="model.message" #name="ngModel" required />
            <div *ngIf="f.submitted && !message.valid" class="help-block">Message is required</div>
          </div>
          <div class="form-group">
            <button [disabled]="loading" class="btn btn-outline-light">Add Kweet</button>
            <img *ngIf="loading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
          </div>
          <div *ngIf="error" class="alert alert-danger">{{error}}</div>
        </form>
      </div>

      <div class="col">
        <p>My latest tweet</p>
        <table class="table">
          <thead>
          <tr>
            <th scope="col">Tweeted by</th>
            <th scope="col">Message</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let tweet of tweets; let last = last">
            <td *ngIf="last">{{tweet.tweetedBy.name}}
            <td *ngIf="last">{{tweet.message}}</td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!--Timeline tweets-->
    <div class="row">
      <div class="col">
        <br>
        <p>Tweets: {{tweetsfromfollowers.length}}</p>
        <table class="table">
          <thead>
          <tr>
            <th scope="col">Tweeted by</th>
            <th scope="col">Message</th>
            <th scope="col">Published</th>
            <th scope="col">Tags</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let tweetTimeline of tweetsfromfollowers">
            <td>{{tweetTimeline.tweetedBy.name}}
            <td>{{tweetTimeline.message}}</td>
            <td>{{tweetTimeline.published}}</td>
            <td>{{tweetTimeline.tag}}</td>
          </tr>
          </tbody>
        </table>
      </div>

      <!--Gerating trends based on followers tags written in a tweet-->
      <div class="col">
        <p>My trends</p>
        <table class="table">
          <thead>
          <tr>
            <th scope="col">Tags</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let tweet of tweetsfromfollowers">
            <td>{{tweet.tag}}</td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!--Timeline mentions-->
    <div class="row">
      <div class="col">
        <br>
        <p>Mentions: {{tweetMentions.length}}</p>
        <table class="table">
          <thead>
          <tr>
            <th scope="col">Tweet</th>
            <th scope="col">Mention</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let tweet of tweetLikesFromUser; let i = index">
            <td>{{tweet.message}}</td>
            <td *ngFor="let mention of tweetMentions; let j = index">{{mention.name}}</td>
          </tr>
          </tbody>
        </table>
      </div>

      <div class="col">

      </div>
    </div>
  </div>

  <br>
  <router-outlet></router-outlet>
  </body>
</html>
